<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindForge - Deep Dive Simulation</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0f172a; /* Darker, more premium blue/black */
            --accent: #3b82f6; /* Bright Blue for actions */
            --bg-chat: #f8fafc;
            --bg-sidebar: #ffffff;
            --text-main: #334155;
            --user-bubble: #3b82f6;
            --bot-bubble: #e2e8f0;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: var(--bg-chat);
            color: var(--text-main);
        }

        /* Header */
        header {
            background: white;
            padding: 1rem 2rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--primary);
            letter-spacing: -0.5px;
        }
        
        .logo span { color: #94a3b8; font-weight: 400; font-size: 0.9rem; margin-left: 10px;}

        .controls { display: flex; gap: 1rem; align-items: center; }

        select {
            padding: 0.6rem 1rem;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            font-size: 0.9rem;
            outline: none;
            background: #f8fafc;
            min-width: 300px;
        }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.6rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover { background: #334155; }

        /* Main Layout */
        .container {
            display: flex;
            height: calc(100vh - 70px);
        }

        /* Chat Area */
        .chat-area {
            flex: 2;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #e2e8f0;
            background: white;
            position: relative;
        }

        .chat-history {
            flex: 1;
            padding: 2rem 15%; /* More whitespace on sides */
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            scroll-behavior: smooth;
        }

        .message {
            max-width: 85%;
            padding: 1rem 1.5rem;
            border-radius: 1rem;
            font-size: 0.95rem;
            line-height: 1.6;
            position: relative;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeUp 0.4s ease forwards;
        }

        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

        .message.bot {
            align-self: flex-start;
            background: var(--bot-bubble);
            color: #1e293b;
            border-bottom-left-radius: 2px;
        }

        .message.user {
            align-self: flex-end;
            background: var(--user-bubble);
            color: white;
            border-bottom-right-radius: 2px;
        }

        .typing-indicator {
            margin-left: 15%;
            padding: 10px;
            color: #94a3b8;
            font-size: 0.85rem;
            font-style: italic;
            display: none;
        }

        /* Sidebar */
        .sidebar {
            flex: 1;
            background: #f8fafc;
            padding: 2rem;
            overflow-y: auto;
            border-left: 1px solid #e2e8f0;
            min-width: 350px;
        }

        .sidebar h2 {
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .live-badge {
            background: #ef4444;
            color: white;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse { 0% {opacity: 1;} 50% {opacity: 0.6;} 100% {opacity: 1;} }

        .phase-card {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.4s ease;
            position: relative;
        }

        .phase-card.locked {
            opacity: 0.6;
            filter: grayscale(100%);
        }

        .phase-card.active {
            border-color: var(--accent);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.1);
            opacity: 1;
            filter: grayscale(0%);
        }

        .phase-header {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: #64748b;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        .phase-content {
            font-size: 0.9rem;
            color: #334155;
        }

        .insight-tag {
            display: inline-block;
            background: #dbeafe;
            color: #1e40af;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 8px;
        }

        .ai-note {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            color: #cbd5e1;
        }

    </style>
</head>
<body>

<header>
    <div class="logo">MindForge <span>| Interactive AI Demo</span></div>
    <div class="controls">
        <select id="personaSelector">
            <option value="money_lover">Persona A: The Pragmatist (Unapologetically Driven by Wealth)</option>
            <option value="rich_idealist">Persona B: The Wealthy Idealist (Zero Financial Pressure)</option>
            <option value="conflicted">Persona C: The Conflicted (Needs "Money Shame" Therapy)</option>
        </select>
        <button onclick="startSimulation()">▶ Start Simulation</button>
    </div>
</header>

<div class="container">
    <div class="chat-area">
        <div class="chat-history" id="chatHistory">
            <div class="message bot">Hello. I am MindForge. I'm here to dig beneath the surface. Let's skip the resume talk. Who are you, really?</div>
        </div>
        <div class="typing-indicator" id="typingIndicator">Typing...</div>
        <div class="ai-note">AI Generated Interface • Simulation Mode</div>
    </div>

    <div class="sidebar">
        <h2>Real-Time Profile <span class="live-badge">Live</span></h2>

        <div class="phase-card locked" id="phase1">
            <div class="phase-header">Phase 1: Core Motivation</div>
            <div class="phase-content" id="content1">
                <em>Waiting for deeper context...</em>
            </div>
        </div>

        <div class="phase-card locked" id="phase2">
            <div class="phase-header">Phase 2: Value Creation Field</div>
            <div class="phase-content" id="content2">
                <em>Waiting for domain analysis...</em>
            </div>
        </div>

        <div class="phase-card locked" id="phase3">
            <div class="phase-header">Phase 3: Leadership Signature</div>
            <div class="phase-content" id="content3">
                <em>Waiting for behavioral patterns...</em>
            </div>
        </div>
    </div>
</div>

<script>
    // --- Persona Scripts ---
    
    const personas = {
        // PERSONA A: Loves Money (Direct & Honest)
        money_lover: [
            // Intro
            { type: 'user', text: "I'm studying Finance. I want to break into Private Equity or Hedge Funds. I need a career path that maximizes ROI on my time.", delay: 1000 },
            
            // Phase 1: Motivation Digging (3 turns)
            { type: 'bot', text: "Straight to the point. 'Maximizing ROI' usually means money. Is wealth the end goal, or a means to something else?", delay: 1500 },
            { type: 'user', text: "It's the goal. I want 10 million liquid by 35. I grew up seeing how lack of money destroys families. I won't let that happen to me.", delay: 2000 },
            { type: 'bot', text: "I appreciate the brutal honesty. It's rare. So your drive is actually rooted in security and control, not just luxury. Correct?", delay: 1500 },
            { type: 'user', text: "Exactly. Money is freedom. I want total control over my life.", delay: 1500 },
            { 
                type: 'update', phase: 1, 
                html: `<strong>Driver:</strong> Financial Freedom & Control<br>
                       <strong>Origin:</strong> Fear of Scarcity<br>
                       <strong>Clarity:</strong> <span class='insight-tag'>Very High (Unapologetic)</span>` 
            },

            // Phase 2: Domain (3 turns)
            { type: 'bot', text: "Understood. Since high returns are the priority, are you better at spotting value in *companies* (Analysis) or *people* (Dealmaking)?", delay: 1500 },
            { type: 'user', text: "I'm good with numbers, but I prefer the deal. I like the psychological warfare of negotiation.", delay: 2000 },
            { type: 'bot', text: "Interesting. Pure quants stay in the back office. Dealmakers need to be on the front lines. How do you handle high-pressure conflict?", delay: 1500 },
            { type: 'user', text: "I thrive on it. When others panic, I get calm. I like high-stakes poker.", delay: 1500 },
            { 
                type: 'update', phase: 2, 
                html: `<strong>Domain:</strong> M&A / Distressed Assets<br>
                       <strong>Role:</strong> Front-Office Dealmaker<br>
                       <strong>Key Skill:</strong> <span class='insight-tag'>High-Stakes Negotiation</span>` 
            },

            // Phase 3: Leadership (2 turns)
            { type: 'bot', text: "Let's talk leadership. Tell me about a time you led a team and failed.", delay: 1500 },
            { type: 'user', text: "University Investment Club. I pushed a risky stock, we lost 20% of our fund. Everyone blamed me.", delay: 2000 },
            { type: 'bot', text: "Did you apologize?", delay: 1000 },
            { type: 'user', text: "No. I wrote a 10-page report analyzing why the market moved against us and how we'd make it back. We made it back in 3 months.", delay: 2500 },
            { 
                type: 'update', phase: 3, 
                html: `<strong>Style:</strong> Transactional / Results-First<br>
                       <strong>Response to Failure:</strong> Analytical Aggression<br>
                       <strong>Motto:</strong> "Results justify the method"` 
            }
        ],

        // PERSONA B: The Wealthy Idealist (Zero Money Pressure)
        rich_idealist: [
            // Intro
            { type: 'user', text: "I'm an architecture student. My professors say I'm talented, but I hate the idea of designing commercial condos.", delay: 1000 },

            // Phase 1: Motivation (3 turns)
            { type: 'bot', text: "Commercial work pays the bills. What is it about condos that repels you?", delay: 1500 },
            { type: 'user', text: "It's soulless. I don't need the money—my family has provided enough for me to not worry about rent. I want to build things that matter.", delay: 2000 },
            { type: 'bot', text: "That is a massive privilege. If money is irrelevant, what is the currency you want to earn? Fame? Historical impact?", delay: 1500 },
            { type: 'user', text: "Historical impact. I want to design public spaces that change how people interact in cities. Like a modern Agora.", delay: 2000 },
            { 
                type: 'update', phase: 1, 
                html: `<strong>Driver:</strong> Self-Actualization / Legacy<br>
                       <strong>Financial Constraint:</strong> None (Privileged)<br>
                       <strong>Motivation:</strong> <span class='insight-tag'>Pure Mission</span>` 
            },

            // Phase 2: Domain (3 turns)
            { type: 'bot', text: "Designing for the public good is noble but bureaucratic. Do you have the patience for politics?", delay: 1500 },
            { type: 'user', text: "Not really. I hate red tape. I just want to design.", delay: 1500 },
            { type: 'bot', text: "Then 'City Planner' isn't for you. You might be better suited as a 'Visionary Founder' of a design studio that selects non-profit clients.", delay: 1500 },
            { type: 'user', text: "Yes! That sounds right. I want to be the creative director, not the politician.", delay: 1500 },
            { 
                type: 'update', phase: 2, 
                html: `<strong>Domain:</strong> Public Architecture / Urban Design<br>
                       <strong>Role:</strong> Visionary Director<br>
                       <strong>Focus:</strong> <span class='insight-tag'>Cultural Impact</span>` 
            },

            // Phase 3: Leadership
            { type: 'bot', text: "As a Creative Director, how do you handle a team member who says your design is 'too expensive' to build?", delay: 1500 },
            { type: 'user', text: "I'd tell them to find a way. Limitations are just laziness. If the vision is good enough, we'll find the donors.", delay: 2000 },
            { 
                type: 'update', phase: 3, 
                html: `<strong>Style:</strong> Visionary / Uncompromising<br>
                       <strong>Weakness:</strong> Detached from constraints<br>
                       <strong>Archetype:</strong> <span class='insight-tag'>The Artist King</span>` 
            }
        ],

        // PERSONA C: The Conflicted (Shame about Money) - **HIGHLIGHT**
        conflicted: [
            // Intro
            { type: 'user', text: "I'm looking into NGO work or Teaching. I want to help society.", delay: 1000 },

            // Phase 1: Motivation - The Therapy Session (4 turns)
            { type: 'bot', text: "Helping society is great. What kind of lifestyle do you envision for yourself in 10 years?", delay: 1500 },
            { type: 'user', text: "Oh, simple. I don't care about money. It's kind of shallow to chase wealth, right? Just enough to live.", delay: 2000 },
            { type: 'bot', text: "I sense some hesitation. 'Shallow' is a judgment. Let's look at your hobbies. What do you do for fun?", delay: 2000 },
            { type: 'user', text: "I like travel. Photography. And I really appreciate good design/fashion.", delay: 2000 },
            { type: 'bot', text: "Travel and design are expensive. There is a conflict between your stated values (NGO) and your lifestyle needs. It is not 'bad' to want money.", delay: 2500 },
            { type: 'user', text: "I guess... my parents always said business people are greedy. But honestly? I hate being broke. I want to help people, but I also want a Tesla.", delay: 3000 },
            { 
                type: 'update', phase: 1, 
                html: `<strong>Driver:</strong> Social Impact + Material Comfort<br>
                       <strong>Barrier:</strong> Cognitive Dissonance (Shame)<br>
                       <strong>True Self:</strong> <span class='insight-tag'>Pragmatic Idealist</span>` 
            },

            // Phase 2: Domain (3 turns)
            { type: 'bot', text: "Thank you for that honesty. Now we can find a real path. Pure NGO work won't buy the Tesla. Have you considered Impact Investing or ESG Consulting?", delay: 2000 },
            { type: 'user', text: "What is that?", delay: 1000 },
            { type: 'bot', text: "It's using finance tools to solve social problems. You make market-rate salaries while doing good.", delay: 1500 },
            { type: 'user', text: "That... actually sounds perfect. I didn't know I was allowed to combine them.", delay: 1500 },
            { 
                type: 'update', phase: 2, 
                html: `<strong>Domain:</strong> ESG / Impact Investing / CSR<br>
                       <strong>Value:</strong> Aligning Profit with Purpose<br>
                       <strong>Fit:</strong> <span class='insight-tag'>High</span>` 
            },

            // Phase 3: Leadership
            { type: 'bot', text: "In this field, you have to bridge the gap between greedy investors and activists. How do you handle conflict?", delay: 2000 },
            { type: 'user', text: "I'm good at translating. I can speak 'business' to the suits and 'mission' to the activists. I make everyone feel heard.", delay: 2500 },
            { 
                type: 'update', phase: 3, 
                html: `<strong>Style:</strong> Diplomat / Bridge-Builder<br>
                       <strong>Superpower:</strong> Code-Switching<br>
                       <strong>Focus:</strong> <span class='insight-tag'>Consensus Building</span>` 
            }
        ]
    };

    // --- Logic ---
    const chatHistory = document.getElementById('chatHistory');
    const typingIndicator = document.getElementById('typingIndicator');
    let isRunning = false;

    function resetUI() {
        chatHistory.innerHTML = `<div class="message bot">Hello. I am MindForge. I'm here to dig beneath the surface. Let's skip the resume talk. Who are you, really?</div>`;
        ['phase1', 'phase2', 'phase3'].forEach((id, index) => {
            const card = document.getElementById(id);
            const content = document.getElementById(`content${index + 1}`);
            card.classList.add('locked');
            card.classList.remove('active');
            content.innerHTML = `<em>Waiting for analysis...</em>`;
        });
        isRunning = false;
    }

    async function startSimulation() {
        if (isRunning) return;
        isRunning = true;
        resetUI();

        const personaKey = document.getElementById('personaSelector').value;
        const script = personas[personaKey];

        for (let step of script) {
            await processStep(step);
        }
        isRunning = false;
    }

    function processStep(step) {
        return new Promise(resolve => {
            if (step.type === 'update') {
                // Update Sidebar
                const card = document.getElementById(`phase${step.phase}`);
                const content = document.getElementById(`content${step.phase}`);
                
                card.classList.remove('locked');
                card.classList.add('active');
                content.innerHTML = step.html;
                
                // Flash effect
                card.style.transform = "scale(1.02)";
                setTimeout(() => card.style.transform = "scale(1)", 200);
                
                resolve();
            } else {
                // Chat Message
                typingIndicator.style.display = 'block';
                typingIndicator.innerText = step.type === 'bot' ? 'MindForge AI is analyzing...' : 'User is typing...';
                
                chatHistory.scrollTop = chatHistory.scrollHeight;

                setTimeout(() => {
                    typingIndicator.style.display = 'none';
                    
                    const msgDiv = document.createElement('div');
                    msgDiv.className = `message ${step.type}`;
                    msgDiv.innerText = step.text;
                    chatHistory.appendChild(msgDiv);
                    chatHistory.scrollTop = chatHistory.scrollHeight;
                    
                    resolve();
                }, step.delay);
            }
        });
    }
</script>

</body>
</html>